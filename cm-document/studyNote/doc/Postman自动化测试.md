---
author: chen miao
time : 2019/12/03
email:  parkstud@qq.com
---
[TOC]

# Postman自动化测试
写这份文档 一方面是因为由于产品上划分了团队,技术和技术一起,业务管业务的.不能再想以前那样开发完之后,只进行简单的接口检查,比如接口通不通,有没数据正不正常.需要对接口做比较全面的测试才能拿给业务了,另一方面产品上业务也不懂测试,他们的测试基本上只是做了验收测试,有问题就找你,而且之前测试dev要测,uat也要测试(如果直接到uat业务测试,修改周期太长了).
总之,主要是太花时间了,写这份文档,开发的时候写下测试,花不了多少时间.

## Postman基础介绍
Postman一款API/接口功能测试工具，很方便的塞数据，查看响应，设置检查点/断言，能进行一定程度上的自动化测试,有免费版和付费版,对于日常开发,免费版已经足够使用了.
postman包括 基础模块和高级部分,个人使用的话基础模块就足够应付日常的开发.
![t1.png](https://i.loli.net/2019/12/12/V6FXA7hs5TRUKiQ.png)

### 使用
![t2.jpg](https://i.loli.net/2019/12/12/XdWJQ23PjlSRuDs.png)
`Collections` 左边的Collections是请求集合,比如你可以用微服务名,创建一个集合名称, 这个微服务下所有的接口写在这里面,我的格式是(微服务)--->对应一个集合,一个Contoller--->集合下一个包,一个接口--->包下的一个请求.

中间的面板就是请求的面板,这个请求方法那么多,其实常用的就那几个,其他的没啥用
`GET` 请求资源 
`POST` 创建资源
`PUT` 更新资源,请求中带上完整的资源
`PATCH` 更新资源,请求中带上改变的属性
`DELETE`删除资源 

![t3.jpg](https://i.loli.net/2019/12/12/wVITcLsoS35JRjd.png)
基础的使用就这些,下面说说其他的

## Environment And Globals

### Variables (变量)
postman可以定义变量,来设置环境信息(dev/uat)或者全局信息,请求头部的地址,而且在使用postman的脚本的时候可以定义变量,emmm... Postman的脚本就是写js,这个Postman变量 就是js里的变量,你可以拿它来在请求和响应中提取数据
#### 变量的范围
![t4.jpg](https://i.loli.net/2019/12/12/W3b8wAHiqLxoRl6.png)
`global` 全局范围
`collection` 集合范围
`environment` 环境范围
`data` 数据范围
`local` 本地范围
如果一个变量被定义到多个范围 , 比如全局变量中定义了uri 环境变量中定义了uri 会使用环境定义的uri.

#### 内置变量
Postman有他自己内置的变量,方便用来测试
##### 随机字符
| 变量名称       | 描述                   |  Example                               |
| ---------     | --------               | -----:                                 |
|**$guid**        | uuid-v4 风格的 guid     | "611c2e81-2ccb-42d8-9ddc-2d0bfa65c1b4" |
|**$timestamp**  | 时间戳                  |   1562757107                           |
|**$randomUUID**  | 随机 36 位的 UUI        |  "6929bb52-3ab2-448a-9796-d6480ecad36b" |
|**$randomAlphaNumeric**| 1位随机字符或数字|   6 , y , z |
|**$randomBoolean** |随机布尔值 (true/false) | true/false|
|**$randomInt**             |    1~1000 之间的随机整数   |         100   |
|**$randomColor** |  随机颜色单词    |"red" |
|**$randomHexColor**|随机颜色码       |          #47594a               |
|**$randomAbbreviation** | 随机缩写     |        SQL                                |
|**$randomIP** |  随机的 IPv4 地址     |        1.1.1.1                                |
|**$randomIPV6**|     随机 IPv6 地址|            dbe2:7ae6:119b:c161:1560:6dda:3a9b:90a9|
|**$randomPassword**|  由字母和数字组成的 15 位随机密码|    t9iXe7COoDKv8k|
|**$randomFullName**|     随机全名（名字 姓氏）(英文)|           Connie Runolfsdottir|
|**$randomImage**|  随机图片地址    |    http://lorempixel.com/640/480/technics          |
|**$randomPhrase**|随机短语    | You can't program the monitor without navigating the mobile XML program!  |
##### 随机日期
| 变量名称       | 描述                   |  Example                               |
| ---------     | -------- | -----: |
|**$randomDateFuture**|  随机未来时间  | Tue Mar 17 2020 13:11:50 GMT+0530 (India Standard Time) |
|**$randomDatePast** | 随机过去时间|Tue Jul 09 2019 23:12:37 GMT+0530 (India Standard Time) |
#### 随机价格
| 变量名称       | 描述                   |  Example                               |
| ---------     | -------- | -----: |
|**$randomPrice**|随机生成 100.00 ~ 999.00 之间的价格| 488.76|

### Environments(环境变量)
![t5.jpg](https://i.loli.net/2019/12/12/xAGm6VHIThRX5UP.png)

![t6.jpg](https://i.loli.net/2019/12/12/WkqZp7LA4XIymRn.png)
这里我定义了两个环境dev环境和uat环境
![t7.jpg](https://i.loli.net/2019/12/12/8zTPZR5akNXjHuf.png)
环境变量存储的是字符串,存不了对象
我在dev和uat环境分别定义了,baseUri和token , 当我测dev的时候切换dev环境 ,测uat的时候用uat环境
![t8.jpg](https://i.loli.net/2019/12/12/TCVRKz35otAx9Ds.png)

### Globals(全局变量)
全局变量存储的是字符串,存不了对象
![t9.jpg](https://i.loli.net/2019/12/12/sYpXSoRUGEZ2NKb.png)
全局环境变量,定义uat和dev公用的变量,暂时不知道定义啥

## Collection
![t10.png](https://i.loli.net/2019/12/12/PQo2ODB1Klg6Ecb.png)

![运行Collection](https://pic3.superbed.cn/item/5df1a2931f8f59f4d62ad3af.png)这里运行可以批量运行,多个集合

![运行界面选项](https://pic1.superbed.cn/item/5df1a3651f8f59f4d62b73de.png)

![t13.jpg](https://i.loli.net/2019/12/12/lILiCRHNo8kn7KT.png)
详细的信息可以在console里面看到

![打开view](https://pic1.superbed.cn/item/5df1a3891f8f59f4d62b8df8.png)

![15.jpg](https://i.loli.net/2019/12/12/ae2Tx5RGjJZqf7W.png)

![具体的信息](https://pic1.superbed.cn/item/5df1a3ac1f8f59f4d62bb7d3.png)emm... 和谷歌的一样

## 常用函数

### **随机字符串**

```js
var chars=['技', '狂', '捆', '郴', '珊', '裴', '衰', '快', '然', '囤', '腹', '歇', '名', '玉', '柬', '崖', '莉', '梳', '咒', '钓', '殊', '后', '俭', '佩', '迭', '壶', '惶', '堰', '碴', '洗', '留', '骂', '凿', '纤', '担', '绦', '缨', '修', '母', '瞬', '草', '俯', '磷', '喜', '养', '斜', '夹', '院', '渡', '饼', '亥', '窄', '剂', '胸', '檄', '错', '厌', '缩', '掌', '翰', '菏', '每', '咕', '鞭', '憾', '言', '裹', '丢', '页', '微', '筋', '鹤', '腾', '净', '渣', '狈', '级', '滩', '顶', '杭', '莎', '吓', '掏', '宏', '惺', '粗', '岗', '礼', '臀', '既', '刃', '赞', '痢', '顷', '衷', '巢', '潮', '仪', '置', '佯', '粘', '僻', '点', '酿', '偷', '腿', '涡', '娄', '蒙', '劈', '轰', '亩', '篓', '灸', '咙', '邻', '秃', '瘦', '淤', '们', '勋', '扇', '排', '尖', '瞳', '伯', '比', '傻', '摘', '洞', '糜', '赠', '蓝', '生', '爆', '如', '啡', '韶', '纫', '挎', '身', '砸', '趣', '核', '炼', '吗', '须', '祁', '蒜', '荒', '切', '婉', '噪', '盯', '侵', '擞', '赢', '熄', '散', '戈', '亭', '巧', '蛰', '削', '挑', '踩', '架', '臆', '呛', '汛', '蓟', '内', '润', '暮', '手', '芍', '采', '答', '馅', '枷', '赤', '培', '肿', '逼', '粟', '奄', '顾', '榆', '早', '懈', '苑', '喧', '巩', '伴', '蹭', '缴', '捕', '朴', '馆', '氛', '耽', '磁', '翻', '充', '敦', '诚', '秉', '普', '才', '凉', '拒', '景', '觉', '醇', '闪', '赦', '掘', '贤', '顿', '坷', '厘', '钠', '胁', '没', '烂', '江', '津', '鹰', '戌', '鸭', '伶', '纲', '拓', '腆', '败', '吝', '南', '宙', '梁', '池', '苔', '戍', '化', '是', '挖', '剐', '绵', '媒', '役', '账', '胃', '瞻', '搞', '矽', '厚', '定', '话', '氟', '屡', '浩', '熊', '先', '戎', '蹲', '税', '妊', '里', '干', '戏', '膊', '货', '剑', '缸', '寝', '象', '葡', '颂', '矾', '诞', '吠', '磅', '霹', '差', '种', '馋', '重', '拖', '平', '绷', '怀', '苗', '册', '隶', '燎', '赫', '庶', '减', '溶', '串', '打', '嘲', '狗', '预', '肄', '退', '伺', '珠', '载', '沦', '便', '鸳', '克', '舒', '疮', '剔', '酋', '旱', '疯', '脉', '扔', '纷', '钦', '拘', '实', '勘', '菠', '履', '阴', '烈', '沧', '憎', '哩', '金', '福', '熏', '噶', '脊', '钧', '建', '庸', '松', '固', '板', '使', '陷', '浮', '蔬', '谤', '猜', '迁', '朽', '轿', '口', '管', '苛', '揣', '崭', '傈', '岩', '幸', '圾', '挝', '古', '虹', '客', '心', '粪', '炉', '植', '贮', '蓬', '支', '或', '遇', '冒', '抚', '订', '绽', '寥', '堆', '句', '柄', '峭', '锰', '尧', '沫', '意', '时', '契', '兑', '萧', '燕', '稗', '瘸', '游', '常', '止', '另', '匠', '必', '棍', '吨', '洱', '涵', '萨', '疵', '战', '认', '登', '狞', '竞', '幻', '次', '侄', '芝', '难', '忆', '瞄', '径', '构', '匡', '岭', '蕴', '赴', '铰', '胎', '冕', '风', '窝', '扛', '权', '此', '赵', '悍', '兔', '椒', '葬', '楔', '主', '异', '狡', '什', '铲', '碎', '迈', '旺', '辆', '涸', '鸽', '加', '武', '起', '挤', '推', '栋', '棒', '奖', '泳', '警', '蹿', '姚', '盂', '挥', '香', '拣', '澈', '歧', '捧', '吭', '卧', '遏', '砌', '厩', '偏', '辈', '举', '熙', '啸', '套', '勤', '抢', '闽', '枉', '吮', '均', '葱', '氮', '粳', '蚁', '拥', '裕', '宫', '银', '揭', '玫', '羊', '雄', '凝', '陀', '娠', '溃', '胖', '型', '例', '歪', '挨', '谱', '误', '硒', '蝉', '茨', '苦', '改', '施', '报', '幂', '猩', '圈', '羌', '瀑', '炕', '啼', '芥', '锻', '瘁', '织', '袖', '滇', '衔', '仇', '讯', '议', '篱', '呵', '砒', '桔', '兜', '棘', '画', '阁', '蕾', '铺', '谴', '近', '菲', '瞎', '茫', '烙', '沸', '咸', '岸', '布', '旁', '途', '位', '暇', '看', '莱', '辐', '倔', '鹅', '神', '娥', '喀', '蠕', '执', '绊', '说', '予', '堕', '琶', '呸', '清', '溉', '诵', '齐', '努', '献', '争', '罐', '埔', '霍', '蛋', '怖', '垒', '危', '汹', '阅', '趁', '惜', '涂', '帆', '郝', '够', '逗', '喂', '输', '披', '叶', '蹈', '永', '沼', '慢', '袜', '事', '刨', '万', '抬', '青', '沽', '号', '吹', '烟', '妥', '辕', '盏', '当', '食', '赂', '啃', '惠', '煤', '唁', '截', '芯', '马', '孵', '停', '赃', '叹', '碟', '入', '疆', '鼓', '于', '嚎', '上', '黑', '滑', '驭', '亏', '罕', '吼', '腥', '尼', '掸', '酥', '铀', '郡', '鞘', '故', '下', '爬', '喇', '般', '驮', '演', '朔', '尽', '徘', '捷', '怜', '龙', '慧', '消', '噎', '昌', '仓', '结', '劲', '缕', '褥', '罗', '锄', '卸', '思', '涉', '不', '全', '虐', '劳', '跋', '盔', '互', '鳃', '铃', '肢', '邢', '柜', '违', '课', '唆', '辛', '患', '嘎', '效', '雕', '踏', '昏', '绕', '库', '垛', '供', '那', '朗', '保', '众', '恢', '讽', '寿', '惦', '泅', '阐', '舱', '樱', '凯', '酪', '优', '校', '搀', '档', '堡', '倡', '蚕', '斌', '阑', '丑', '狸', '坛', '盗', '肥', '佛', '笺', '迟', '翟', '羞', '搁', '殿', '埠', '吁', '磨', '太', '乔', '部', '皖', '戳', '盘', '谁', '咆', '蛙', '碧', '惩', '嵌', '梧', '烩', '祭', '饭', '易', '仙', '螟', '阔', '泉', '舵', '哉', '且', '锋', '调', '迢', '挽', '呆', '掀', '蛛', '澡', '摆', '致', '腰', '锌', '慰', '娶', '父', '萄', '朝', '猾', '猿', '詹', '匿', '垢', '恨', '膳', '摇', '决', '夯', '邪', '谅', '特', '乘', '侣', '查', '艺', '坡', '藕', '屈', '饲', '泌', '浑', '救', '辣', '评', '眠', '漠', '缠', '张', '寅', '勿', '船', '汉', '催', '锐', '森', '脱', '屉', '胯', '女', '唐', '失', '群', '韦', '丘', '府', '溜', '厄', '捂', '盟', '侥', '密', '督', '瞥', '告', '衫', '惰', '韧', '谈', '凸', '千', '垦', '屋', '饵', '酵', '硬', '肯', '堪', '肮', '畔', '殆', '矩', '诈', '莆', '帛', '疗', '承', '婿', '睦', '揉', '崔', '僳', '诉', '敖', '迪', '想', '辨', '车', '稽']
function generateMixed(n) {
    var res = "";
    for(var i = 0; i < n; i++) {
        var id = Math.ceil(Math.random() * 35);
        res += chars[id];
    }
    return res;
}
pm.variables.set("relatedWord1",generateMixed(4));
pm.variables.set("relatedWord2",generateMixed(4));


```



## Postman 断言
就是请求里面的test 可以写js 判断返回值是否正确.
postman一些方法,方便测试

![postman内置的函数](https://pic3.superbed.cn/item/5df1a3ce1f8f59f4d62bcd2f.png)
**1. 状态码断言：**

*   `Status code: Code is 200`
    判断状态码是否正确；默认判断状态是否为 200， 可修改；
*   `Status code:Successful POST request`
    判断状态码是否为预期结果之一；比如默认断言状态码是否是 201， 202 中的一个；
*   `Status code:Code name has string`
    判断状态码描述是否包含字符串，比如是否包含 Created；

**2. 响应结果断言：**

*   `Response body: Contains string`
    响应结果是否包含字符串；
*   `Response body: JSON value check`
    响应结果如果是 JSON，检查具体的 JSON 值；
*   `Response body: Is equal to a string`
    响应结果与字符串是否全部匹配预期的字符串；
*   `Response body: Convert XML body to a JSON Object`
    将 XML 转换成 JSON；

**3. Header 断言：**

*   `Response headers:Content-Type header check`
    响应头部中是否包含字段；

**4. 速度断言：**

*   `Response time is less than 200ms`
    响应时间是否少于多少 ms。

**案例**
![18.jpg](https://i.loli.net/2019/12/12/sjauEHclG4TiUXN.png)

## 学习资料
[Postman官网地址](https://www.getpostman.com/)

