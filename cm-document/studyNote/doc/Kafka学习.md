# Kafka学习

## 理论

### 什么是kafka

Kafka是水平可伸缩，容错和快速消息传递系统。这是一个发布订阅模式，各种生产者和消费者都可以在其中进行读写。它解耦了源系统和目标系统。一些特性

- 扩展到数百个节点。
- 每秒可以处理数百万条消息。
- 实时处理（约10毫秒）。

Apache Kafka是一个分布式的[发布-订阅消息传递系统，](https://data-flair.training/blogs/kafka-workflow/) 用于处理大量数据，使我们能够将消息从一个端点传递到另一个端点。它适用于离线和在线消息消费。此外，为了防止数据丢失，Kafka消息将保留在磁盘上并在群集内复制。另外，它是基于ZooKeeper同步服务构建的。在涉及实时流数据分析时，它还可以与Apache Storm和[Spark](https://data-flair.training/blogs/spark-tutorial/)很好地集成。

### 为什么要使用kafak

- 许多源和目标系统需要集成。通常，许多系统的集成涉及复杂性，例如处理许多协议，消息传递格式等。
- 消息系统处理大量流。

###  kafka功能

- 流处理
- 消跟踪用户活动，日志聚合等
- 解耦系统

### 术语

#### 主题

主题是特定的数据流。它与NoSQL数据库中的表非常相似。就像NoSQL数据库中的表一样，主题被划分为多个分区，这些分区使主题可以分布在各个节点上。就像表中的主键一样，主题在每个分区上都有偏移量。您可以使用其主题，分区和偏移量来唯一标识一条消息。

#### 分区

分区使主题可以分布在整个群集中。分区是用于水平可伸缩性的并行性单元。一个主题可以在一个节点之间具有多个分区扩展。

消息根据分区键分配给分区；如果没有分区键，则该分区是随机分配的。使用正确的密钥来避免热点很重要。

分区中的每个消息都分配有一个称为偏移量的增量ID。每个分区的偏移量是唯一的，并且消息仅在分区内排序。写入分区的消息是不可变的。

